═══════════════════════════════════════════════════════════════════════════════
  🎉 НОВАЯ ВЕРСИЯ С ВКЛАДКАМИ ПО КОНТРАКТАМ!
═══════════════════════════════════════════════════════════════════════════════

✨ ЧТО ЭТО?

Совершенно НОВЫЙ подход к анализу данных!
Теперь у каждого контракта есть СВОЯ ВКЛАДКА с полной информацией.

НЕТ общих данных. НЕТ фильтров.
ТОЛЬКО глубокий детальный анализ каждого контракта отдельно!

═══════════════════════════════════════════════════════════════════════════════

🎯 КАК ЭТО РАБОТАЕТ?

Когда вы откроете дашборд, увидите:

┌─────────────────────────────────────────────────────────────────────────────┐
│ BI Dashboard - Детальный анализ по контрактам                               │
├─────────────────────────────────────────────────────────────────────────────┤
│ Всего контрактов: X | Данные обновлены: DD.MM.YYYY HH:MM                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│ 📑 Выберите контракт для детального анализа:                                │
│                                                                               │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │ [Контракт 1] [Контракт 2] [Контракт 3] ... [Контракт N]                │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                               │
│ ╔═══════════════════════════════════════════════════════════════════════╗   │
│ ║  ВКЛАДКА КОНТРАКТА (выбранный контракт)                              ║   │
│ ╠═══════════════════════════════════════════════════════════════════════╣   │
│ ║                                                                       ║   │
│ ║  📄 Название контракта                                               ║   │
│ ║  🏪 Сеть: ...                                                         ║   │
│ ║  📅 Начало: DD.MM.YYYY  📅 Конец: DD.MM.YYYY  📊 Статус: ...        ║   │
│ ║                                                                       ║   │
│ ║  ┌──────────────┬──────────────┬──────────────┬──────────────┐      ║   │
│ ║  │ 💰 Продажи   │ 📦 Продажи   │ 💵 Доход     │ 💸 Затраты   │      ║   │
│ ║  │ План/Факт    │ План/Факт    │ План/Факт    │ План/Факт    │      ║   │
│ ║  │ XX.X%        │ XX.X%        │ XX.X%        │ XX.X%        │      ║   │
│ ║  └──────────────┴──────────────┴──────────────┴──────────────┘      ║   │
│ ║                                                                       ║   │
│ ║  💸 Детальная разбивка затрат (6 карточек):                          ║   │
│ ║  [Листинг] [Скидка] [Ретро] [Маркетинг] [Промо] [Фонды]             ║   │
│ ║                                                                       ║   │
│ ║  📊 График план/факт по месяцам                                      ║   │
│ ║  📈 [график]                                                         ║   │
│ ║                                                                       ║   │
│ ║  💸 График затрат по типам                                           ║   │
│ ║  📈 [график]                                                         ║   │
│ ║                                                                       ║   │
│ ║  🥤 ТАБЛИЦА по Brand_format (SKU):                                    ║   │
│ ║  ┌──────────┬───────────┬──────────┬───────────┬─────────────┐       ║   │
│ ║  │ SKU      │ План шт   │ Факт шт  │ План руб  │ Факт руб    │ ...   ║   │
│ ║  ├──────────┼───────────┼──────────┼───────────┼─────────────┤       ║   │
│ ║  │ E-ON...  │ 1,000,000 │ 800,000  │ 50,000... │ 40,000,000  │ ...   ║   │
│ ║  └──────────┴───────────┴──────────┴───────────┴─────────────┘       ║   │
│ ║  [Сортировка] [Фильтрация] [Export в Excel]                          ║   │
│ ║                                                                       ║   │
│ ║  🥤 График по Brand_format (SKU)                                      ║   │
│ ║  📈 [график с цветовой индикацией]                                   ║   │
│ ║                                                                       ║   │
│ ╚═══════════════════════════════════════════════════════════════════════╝   │
└─────────────────────────────────────────────────────────────────────────────┘

Просто КЛИКНИТЕ НА ВКЛАДКУ контракта - и увидите ВСЮ информацию!

═══════════════════════════════════════════════════════════════════════════════

✅ ЧТО ПОКАЗЫВАЕТСЯ ДЛЯ КАЖДОГО КОНТРАКТА?

1. 📋 ИНФОРМАЦИЯ О КОНТРАКТЕ:
   • Название контракта
   • Торговая сеть
   • 📅 Дата начала контракта
   • 📅 Дата конца контракта
   • Статус (действующий/завершенный)
   • Группа сбыта
   • Период данных

2. 📊 КЛЮЧЕВЫЕ ПОКАЗАТЕЛИ (KPI):
   • Продажи (руб): план, факт, разница, % выполнения, прогресс-бар
   • Продажи (шт): план, факт, разница, % выполнения, прогресс-бар
   • Доход: план, факт, разница, % выполнения, прогресс-бар
   • Затраты: план, факт, разница, % выполнения, прогресс-бар
   • Рентабельность (план и факт)
   • Средний чек (план и факт)
   • Количество SKU
   • Количество периодов

3. 💸 ДЕТАЛЬНАЯ РАЗБИВКА ЗАТРАТ (6 карточек):
   • Листинг/безусловные выплаты (план/факт/% от плана)
   • Скидка в цене (план/факт/% от плана)
   • Ретро (план/факт/% от плана)
   • Маркетинг (план/факт/% от плана)
   • Промо-скидка (план/факт/% от плана)
   • Фонды (план/факт/% от плана)

4. 📈 ГРАФИКИ:
   • План/Факт продаж по месяцам (в рублях и штуках)
   • Затраты по типам (план/факт)
   • Продажи по Brand_format (с цветовой индикацией)

5. 🥤 ДЕТАЛЬНАЯ ТАБЛИЦА ПО BRAND_FORMAT (SKU):
   Для КАЖДОГО SKU в рамках контракта показывается:
   
   ПРОДАЖИ:
   • План шт
   • Факт шт
   • Выполнение плана (шт), %
   • План руб
   • Факт руб
   • Выполнение плана (руб), %

   ЗАТРАТЫ (план и факт для каждого):
   • Листинг
   • Скидка в цене
   • Ретро
   • Маркетинг
   • Промо-скидка
   • Общие затраты

   ФИНАНСЫ:
   • Доход план
   • Доход факт
   • Рентабельность факт, %

   ИТОГО: 22 столбца с ПОЛНОЙ детализацией!

   Возможности таблицы:
   ✅ Сортировка по любому столбцу (клик на заголовок)
   ✅ Фильтрация данных (поле под заголовком)
   ✅ Постраничный просмотр (15 записей на страницу)
   ✅ 📥 ЭКСПОРТ В EXCEL! (кнопка справа вверху)

═══════════════════════════════════════════════════════════════════════════════

🚀 КАК ЗАПУСТИТЬ?

Способ 1 (Самый простой):
─────────────────────────
1. Дважды кликните: run_dashboard_tabs.bat
2. Откройте браузер: http://localhost:8052
3. Кликайте на вкладки контрактов!

Способ 2 (Командная строка):
───────────────────────────
1. python bi_dashboard_tabs.py
2. Откройте браузер: http://localhost:8052

ВАЖНО: Порт 8052 (новый порт!)

═══════════════════════════════════════════════════════════════════════════════

💡 КАК ИСПОЛЬЗОВАТЬ?

1. ОТКРОЙТЕ ДАШБОРД
   └─ http://localhost:8052

2. УВИДИТЕ ВКЛАДКИ ВВЕРХУ
   └─ Каждая вкладка = один контракт

3. КЛИКНИТЕ НА ВКЛАДКУ КОНТРАКТА
   └─ Вся информация загрузится автоматически

4. ИЗУЧИТЕ ИНФОРМАЦИЮ:
   └─ Даты контракта (начало/конец)
   └─ KPI (продажи, доход, затраты)
   └─ Детальные затраты (6 типов)
   └─ Графики по месяцам
   └─ Таблица по всем SKU

5. ЭКСПОРТИРУЙТЕ ДАННЫЕ:
   └─ Пролистайте до таблицы
   └─ Нажмите кнопку "Export" (справа вверху)
   └─ Выберите "xlsx"
   └─ Таблица сохранится в Excel!

6. ПЕРЕКЛЮЧАЙТЕСЬ МЕЖДУ КОНТРАКТАМИ:
   └─ Просто кликайте на другие вкладки
   └─ Никаких фильтров - просто переключение!

═══════════════════════════════════════════════════════════════════════════════

🎨 ОСОБЕННОСТИ ДИЗАЙНА

✅ Красивые градиенты и цвета
✅ Прогресс-бары для наглядности
✅ Цветовая индикация (зеленый = хорошо, красный = плохо)
✅ Карточки с тенями и скруглениями
✅ Адаптивный дизайн
✅ Интерактивные графики Plotly
✅ Профессиональный вид

═══════════════════════════════════════════════════════════════════════════════

🔄 ОТЛИЧИЯ ОТ ДРУГИХ ВЕРСИЙ

┌────────────────────────┬─────────────┬──────────────┬────────────────────┐
│ Функция                │ Базовая     │ Расширенная  │ Вкладки (НОВАЯ!)   │
├────────────────────────┼─────────────┼──────────────┼────────────────────┤
│ Порт                   │ 8050        │ 8051         │ 8052               │
│ Подход                 │ Общие данные│ Фильтры      │ Вкладки            │
│ Фильтр по контрактам   │ ❌          │ ✅ Dropdown  │ ✅ Вкладки         │
│ Даты контракта         │ ❌          │ ✅           │ ✅ Крупно          │
│ Визуализация           │ Общая       │ С фильтрами  │ Глубокая детальная │
│ Детальные карточки     │ ❌          │ ✅ (6)       │ ✅ (6 + доп.)      │
│ Таблица по SKU         │ ❌          │ ✅           │ ✅ Расширенная     │
│ Столбцов в таблице     │ -           │ 19           │ 22                 │
│ Экспорт в Excel        │ ❌          │ ✅           │ ✅                 │
│ Прогресс-бары          │ ❌          │ ❌           │ ✅                 │
│ Общие данные           │ ✅          │ ✅           │ ❌ Только детали   │
└────────────────────────┴─────────────┴──────────────┴────────────────────┘

ВЫБИРАЙТЕ ВЕРСИЮ С ВКЛАДКАМИ ДЛЯ:
  ✅ Глубокого анализа каждого контракта
  ✅ Работы с конкретными контрактами
  ✅ Презентации по контрактам
  ✅ Детальных отчетов

═══════════════════════════════════════════════════════════════════════════════

📋 ПРИМЕР ИСПОЛЬЗОВАНИЯ

Сценарий: Нужно проанализировать контракт "FIXPRICE (9.2022)"

1. Запускаем: python bi_dashboard_tabs.py
2. Открываем: http://localhost:8052
3. Кликаем на вкладку "FIXPRICE (9.2022)"
4. Видим:
   
   📄 FIXPRICE (9.2022)
   🏪 Сеть: FIXPRICE
   📅 Начало: 01.09.2022
   📅 Конец: 28.02.2023
   📊 Статус: действующий

   💰 Продажи: X млн ₽ (XX.X% выполнения)
   📦 Продажи: X тыс. шт (XX.X% выполнения)
   💵 Доход: X млн ₽ (XX.X% выполнения)
   💸 Затраты: X млн ₽ (XX.X% от плана)

   💸 Детальные затраты:
   [Листинг: X ₽] [Скидка: X ₽] [Ретро: X ₽] ...

   📊 Графики по месяцам
   
   🥤 Таблица по всем Brand_format (SKU):
   - E-ON 0,45 CAN: план/факт/затраты/доход
   - Fresh Bar 0,48 PET: план/факт/затраты/доход
   - Tornado 0,45 CAN: план/факт/затраты/доход
   ...

5. Экспортируем таблицу в Excel
6. Переключаемся на другой контракт!

═══════════════════════════════════════════════════════════════════════════════

💡 СОВЕТЫ

1. НАВИГАЦИЯ:
   └─ Используйте вкладки вверху страницы
   └─ Прокручивайте вниз для просмотра всей информации
   └─ Используйте кнопки сортировки в таблице

2. АНАЛИЗ:
   └─ Смотрите на прогресс-бары (зеленый = хорошо)
   └─ Обращайте внимание на цвета карточек
   └─ Изучайте графики по месяцам (тренды)

3. ЭКСПОРТ:
   └─ Экспортируйте таблицу для каждого контракта
   └─ Используйте в Excel для дальнейшего анализа
   └─ Сохраняйте отчеты по контрактам

4. ПРОИЗВОДИТЕЛЬНОСТЬ:
   └─ Первая загрузка может занять 5-10 секунд
   └─ Переключение между вкладками быстрое
   └─ Для большого количества контрактов - терпение!

═══════════════════════════════════════════════════════════════════════════════

🎯 ЭТО ИМЕННО ТО, ЧТО ВЫ ПРОСИЛИ!

✅ Отдельная вкладка для каждого контракта (НЕ фильтр!)
✅ Даты начала и конца контракта (крупно показаны)
✅ Никаких общих данных (только детали)
✅ Глубокая визуализация каждого контракта
✅ Все Brand_format (SKU) по контракту
✅ Все плановые и фактические расходы
✅ Детальные таблицы с экспортом

НОВЫЙ ПОДХОД - НОВЫЕ ВОЗМОЖНОСТИ!

═══════════════════════════════════════════════════════════════════════════════

🚀 ЗАПУСКАЙТЕ ПРЯМО СЕЙЧАС!

Windows:     run_dashboard_tabs.bat
Все ОС:      python bi_dashboard_tabs.py
Браузер:     http://localhost:8052

═══════════════════════════════════════════════════════════════════════════════

📞 ПОМОЩЬ

Проблемы?
  1. Убедитесь, что порт 8052 свободен
  2. Проверьте, что все библиотеки установлены
  3. Дайте время на загрузку (5-10 секунд)

Вопросы?
  1. Читайте комментарии в коде
  2. Смотрите примеры на экране
  3. Экспериментируйте с вкладками!

═══════════════════════════════════════════════════════════════════════════════

🎉 ПРИЯТНОГО ИСПОЛЬЗОВАНИЯ!

Теперь у вас есть САМЫЙ ДЕТАЛЬНЫЙ дашборд с вкладками по контрактам!

═══════════════════════════════════════════════════════════════════════════════
